<html>
<head>
	
	<title>Login</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="./css/main.css">

</head>

<body>
	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100">
			<form class="login100-form validate-form">

        <span class="login100-form-title p-b-34 p-t-27">
          Log in
        </span>

        <div class="wrap-input100 validate-input" >
          <input class="input100" type="text" name="email" placeholder="Email" required />
         
        <div class="email error"></div>
      </div>

      <div class="wrap-input100 validate-input" >
        <input class="input100" type="password" name="password" placeholder="Password" required />

        <div class="password error"></div>
      </div>

      <div class="container-login100-form-btn">
        <button class="login100-form-btn">Login</button>
			  </div>
      
        <a href="/signup" style="color: #FFF;">SIGN UP</a>
          </form>
    </div>
  </div>
</div> 


 <!-- <script>
  document.getElementById("btn").onclick = function(){
    window.setTimeout(function(){location.href = '/signup';});
  };
</script> -->

<script>
  const form = document.querySelector('form');
  const emailError=document.querySelector('.email.error');
  const passwordError = document.querySelector('.password.error');
  
  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    //reset value
    emailError.textContent='';
    passwordError.textContent='';
      
      
    // get values
    const email = form.email.value;
    const password = form.password.value;

    try{ //11 12 
      const res= await fetch('/',{
        method: 'POST',
        body: JSON.stringify({email , password}),
        headers:{'Content-Type' : 'application/json'}
        });

        const data= await res.json();
        console.log(data);

        if(data.errors){
          emailError.textContent= data.errors.email;
          passwordError.textContent=data.errors.password;
        }
        if(data.user){
          location.assign('/index'); //login işlemine basıldığında gidilecek yer 
        }
      }
      catch (err){
        console.log(err);
      }

      //console.log(email, password);

    });
  </script>

</body>
</html>